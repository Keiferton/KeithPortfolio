---
const { data, url } = Astro.props;
const hasGlb = Boolean(data.glbPath);
---
<div class="group block rounded-2xl border p-4 transition">
  {hasGlb ? (
    <div class="mb-3 rounded-xl overflow-hidden" style="width:100%;height:220px;">
      <model-viewer
        src={data.glbPath}
        camera-controls
        interaction-prompt="none"
        loading="lazy"
        style="width:100%;height:100%;background:#f7f7f7;"
        onclick="event.stopPropagation();"
      ></model-viewer>
    </div>
  ) : (
    data.cover && <img src={data.cover} alt={data.title} class="rounded-xl mb-3" />
  )}
  <a href={url} class="block">
    <h3 class="font-semibold group-hover:underline">{data.title}</h3>
    <p class="text-sm text-zinc-600 dark:text-zinc-300 mt-1">{data.summary}</p>
  </a>
  <div class="mt-3 flex flex-wrap gap-2">
    {data.tech?.map((t:string) => (
      <span class="text-xs border border-zinc-300 dark:border-zinc-600 rounded px-2 py-0.5 text-zinc-700 dark:text-zinc-200">
        {t}
      </span>
    ))}
  </div>
</div>
